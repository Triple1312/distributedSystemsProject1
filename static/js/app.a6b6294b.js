(function(){"use strict";var t={954:function(t,o,e){var n=e(9242),r=e(3396);const a={style:{width:"100%",height:"100%"}};function i(t,o,e,n,i,s){const c=(0,r.up)("HereMap"),u=(0,r.up)("DirectionBar");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",a,[(0,r.Wm)(c)]),(0,r.Wm)(u)])}const s={id:"map"};function c(t,o,e,n,a,i){return(0,r.wg)(),(0,r.iD)("div",s)}var u=e(7709),l=e.n(u),d={name:"Here",props:{center:Object},data(){return{token:null,map:null}},async mounted(){l().accessToken="pk.eyJ1IjoicHBwYzEzMTIiLCJhIjoiY2wxNTk0dGR0MHl6NzNkczBxNzRxbTczNSJ9.qFzM1Q2oov0E6rFbDodAdQ",this.$store.commit("setMap",new(l().Map)({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[4.40258,51.217616],zoom:9})),this.map=this.$store.state.map},methods:{addMarker(t){(new(l().Marker)).setLngLat(t).addTo(this.map)}},computed:{getStations(){return this.$store.state.stations}}},p=e(89);const m=(0,p.Z)(d,[["render",c],["__scopeId","data-v-1eefdb00"]]);var h=m,g=e(6265),f=e.n(g),y=e(7139);const v=t=>((0,r.dD)("data-v-35782afb"),t=t(),(0,r.Cn)(),t),_={id:"directionBar"},w={id:"inputBar"},k=v((()=>(0,r._)("label",{for:"directrionBarInputFrom"}," From: ",-1))),b=["onchange"],$=v((()=>(0,r._)("label",{for:"directrionBarInputTo"}," To: ",-1))),j=["onchange"],T={id:"stationList"},S=["value"],x={key:0,style:{height:"20px",width:"50px",position:"relative",margin:"auto"}},B=v((()=>(0,r._)("hr",null,null,-1))),D=v((()=>(0,r._)("label",null," Train: ",-1))),M={key:1,style:{height:"20px",width:"50px",top:"500px",margin:"auto"}},L=v((()=>(0,r._)("hr",null,null,-1))),I=v((()=>(0,r._)("label",null," Car: ",-1))),F=v((()=>(0,r._)("div",{id:"directionBarHandle"},[(0,r._)("div",{class:"barHandle"})],-1)));function z(t,o,e,n,a,i){return(0,r.wg)(),(0,r.iD)("div",_,[(0,r._)("div",w,[k,(0,r._)("input",{type:"search",id:"directrionBarInputFrom",class:"barInput",list:"stationList",onchange:i.setFrom_name},null,8,b),$,(0,r._)("input",{type:"search",id:"directrionBarInputTo",class:"barInput",list:"stationList",onchange:i.setTo_name},null,8,j),(0,r._)("datalist",T,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.getStations,(t=>((0,r.wg)(),(0,r.iD)("option",{value:t.name,key:t.name},null,8,S)))),128))]),(0,r._)("div",{class:"barButton",onClick:o[0]||(o[0]=(...t)=>i.drawRoute&&i.drawRoute(...t)),style:{border:"black 2px solid",margin:"10px",width:"20%",height:"3%","background-color":"transparent","text-align-all":"center"}}," Submit "),a.found?((0,r.wg)(),(0,r.iD)("div",x,[B,D,(0,r.Uk)(" duration: "+(0,y.zw)(this.train_route.duration/60)+" mins ",1)])):(0,r.kq)("",!0),a.found?((0,r.wg)(),(0,r.iD)("div",M,[L,I,(0,r.Uk)(" duration: "+(0,y.zw)(Math.floor(this.car_route.duration/60))+" mins ",1)])):(0,r.kq)("",!0)]),F])}var R={name:"DirectionBar",data(){return{found:Boolean,train_route:{},car_route:{}}},mounted(){this.found=!1},methods:{submitStations(){const t=document.getElementById("directrionBarInputFrom").getAttribute("value"),o=document.getElementById("directrionBarInputTo").getAttribute("value");this.$store.commit("setPoints",t,o)},drawRoutet(){this.getRoute_train(),this.getRoute_car(),this.found=!0},async drawRoute(){let t=await f()({method:"get",url:`http://localhost:80/direction/${this.$store.state.points.from.station.name}/${this.$store.state.points.to.station.name}`}).then((t=>t.data)),o=await t;this.drawRouteCar(o.car),this.drawRouteTrain(o.train),this.found=!0},drawRouteTrain(t){let o=this.$store.state.map;this.train_route=t,o.getSource("route_train")?o.getSource("route_train").setData(t.geojson):o.addLayer({id:"route_train",type:"line",source:{type:"geojson",data:t.geojson},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#0000ff","line-width":5,"line-opacity":.75}})},drawRouteCar(t){let o=this.$store.state.map;this.car_route=t,o.getSource("route_car")?o.getSource("route_car").setData(t.geojson):o.addLayer({id:"route_car",type:"line",source:{type:"geojson",data:t.geojson},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#000000","line-width":5,"line-opacity":.75}})},async getRoute_train(){let t=this.$store.state.points,o=new Date;console.log(this.$store.state.points.from.station.name,this.$store.state.points.to.station.name);let e=o.getHours();e<10&&(e="0"+e);let n=o.getMinutes();n<10&&(n="0"+n);let r=o.getDate();r<10&&(r="0"+r);let a=o.getMonth()+1;a<10&&(a="0"+a);let i=""+o.getFullYear();i=i.slice(2,4);let s=await f()({method:"get",url:`https://api.irail.be/connections?from=${this.$store.state.points.from.station.name}&to=${this.$store.state.points.to.station.name}&format=json&lang=en&results=2`}).then((t=>(console.log("getroute_train",t.data),t.data))).catch((t=>{console.warn(t)})),c=await s;console.log("trying train now",c.connection[0]);let u=[];this.train_route=c.connection[0];try{u=c.connection[0].vias.via}catch(m){}let l=[t.from.coord];u.map((t=>{l.push([t.stationinfo.locationX,t.stationinfo.locationY])}));const d={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:l}};l.push(t.to.coord);let p=this.$store.state.map;p.getSource("route_train")?p.getSource("route_train").setData(d):p.addLayer({id:"route_train",type:"line",source:{type:"geojson",data:d},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#0000ff","line-width":5,"line-opacity":.75}}),console.log("train should work")},async getRoute_car(){let t=this.$store.state.points,o=await f()({method:"get",url:`https://api.mapbox.com/directions/v5/mapbox/driving/${t.from.coord[0]},${t.from.coord[1]};${t.to.coord[0]},${t.to.coord[1]}?alternatives=false&geometries=geojson&overview=full&steps=false&access_token=pk.eyJ1IjoicHBwYzEzMTIiLCJhIjoiY2wxNTk0dGR0MHl6NzNkczBxNzRxbTczNSJ9.qFzM1Q2oov0E6rFbDodAdQ`}).then((t=>t.data)).catch((t=>{console.warn(t)}));console.log("got directions from mapbox");const e=await o,n=e.routes[0];this.car_route=n;const r=n.geometry.coordinates;console.log("route",r,n);const a={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:r}};let i=this.$store.state.map;i.getSource("route_car")?i.getSource("route_car").setData(a):i.addLayer({id:"route_car",type:"line",source:{type:"geojson",data:a},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#000000","line-width":5,"line-opacity":.75}})},setFrom_name(){console.log("frojm"),this.clearDirections(),this.$store.commit("setFrom_name",document.getElementById("directrionBarInputFrom").value)},setTo_name(){this.clearDirections(),this.$store.commit("setTo_name",document.getElementById("directrionBarInputTo").value)},clearDirections(){this.found=!1;let t=this.$store.state.map;t.getSource("route_car")&&t.getSource("route_car").setData({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[]}}),t.getSource("route_train")&&t.getSource("route_train").setData({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[]}})}},computed:{getStations(){return this.$store.state.stations},getMap(){return console.log("map?"),this.$store.state.map}}};const O=(0,p.Z)(R,[["render",z],["__scopeId","data-v-35782afb"]]);var H=O,Y={name:"App",components:{DirectionBar:H,HereMap:h},mounted(){console.log("app mount"),f()({method:"get",url:"http://localhost:80/stations"}).then((t=>{this.$store.commit("setStations",t.data.station)})).catch((t=>{console.assert(!0,t)}))}};const N=(0,p.Z)(Y,[["render",i]]);var C=N,E=e(65);const J=(0,E.MT)({state(){return{stations:[],points:{from:{station:{},marker:{},coord:[]},to:{station:{},marker:{},coord:[]}},map:{}}},mutations:{setStations(t,o){t.stations=o},setPoints(t,o,e){t.points.from.station=o,t.points.to.station=e,t.points.from.coord=[t.points.from.station.locationX,t.points.from.station.locationY],t.points.to.coord=[t.points.to.station.locationX,t.points.to.station.locationY],t.points.from.marker.remove(),t.points.to.marker.remove(),t.points.from.marker=(new(l().Marker)).setLngLat(t.points.from.coord).addTo(t.map),t.points.to.marker=(new(l().Marker)).setLngLat(t.points.to.coord).addTo(t.map)},setMap(t,o){t.map=o},setMarkers(t,o){t.markers.to.remove(),t.markers.from.remove(),t.markers=o},setFrom_name(t,o){try{t.points.from.marker.remove()}catch{console.log()}t.stations.map((e=>{e.name===o&&(t.points.from.station=e,t.points.from.coord=[e.locationX,e.locationY],t.points.from.marker=(new(l().Marker)).setLngLat(t.points.from.coord).addTo(t.map))}))},setTo_name(t,o){try{t.points.to.marker.remove()}catch{console.log()}t.stations.map((e=>{e.name===o&&(t.points.to.station=e,t.points.to.coord=[e.locationX,e.locationY],t.points.to.marker=(new(l().Marker)).setLngLat(t.points.to.coord).addTo(t.map))}))},setPoints_name(t,o,e){t.setFrom_name(t,o),t.setTo_name(t,e)}}});var A=J;const P=(0,n.ri)(C);P.use(A),P.mount("#app")}},o={};function e(n){var r=o[n];if(void 0!==r)return r.exports;var a=o[n]={exports:{}};return t[n].call(a.exports,a,a.exports,e),a.exports}e.m=t,function(){var t=[];e.O=function(o,n,r,a){if(!n){var i=1/0;for(l=0;l<t.length;l++){n=t[l][0],r=t[l][1],a=t[l][2];for(var s=!0,c=0;c<n.length;c++)(!1&a||i>=a)&&Object.keys(e.O).every((function(t){return e.O[t](n[c])}))?n.splice(c--,1):(s=!1,a<i&&(i=a));if(s){t.splice(l--,1);var u=r();void 0!==u&&(o=u)}}return o}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[n,r,a]}}(),function(){e.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(o,{a:o}),o}}(),function(){e.d=function(t,o){for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){var t={143:0};e.O.j=function(o){return 0===t[o]};var o=function(o,n){var r,a,i=n[0],s=n[1],c=n[2],u=0;if(i.some((function(o){return 0!==t[o]}))){for(r in s)e.o(s,r)&&(e.m[r]=s[r]);if(c)var l=c(e)}for(o&&o(n);u<i.length;u++)a=i[u],e.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return e.O(l)},n=self["webpackChunkproject1"]=self["webpackChunkproject1"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=e.O(void 0,[998],(function(){return e(954)}));n=e.O(n)})();
//# sourceMappingURL=app.a6b6294b.js.map